!function(t){t.tablesort=function(e,s){var a=this;this.$table=e,this.settings=t.extend({},t.tablesort.defaults,s),this.$table.find("thead th").bind("click.tablesort",function(){t(this).hasClass("disabled")||a.sort(t(this))}),this.index=null,this.$th=null,this.direction=[]},t.tablesort.prototype={sort:function(e,s){var a=new Date,i=this,n=this.$table,r=n.find("tbody tr"),o=e.index(),l=[],d=t("<div/>"),c=function(t,e,s){var a;return t.data().sortBy?(a=t.data().sortBy,"function"==typeof a?a(t,e,s):a):e.data("sort")?e.data("sort"):e.text()},h=function u(t,e){var s=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,a=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,n=/^0x[0-9a-f]+$/i,r=/^0/,o=0,l=function(t){return(""+t).toLowerCase().replace(",","")},d=l(t).replace(a,"")||"",c=l(e).replace(a,"")||"",h=d.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),u=c.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),f=Math.max(h.length,u.length),b=parseInt(d.match(n),10)||1!=h.length&&d.match(i)&&Date.parse(d),g=parseInt(c.match(n),10)||b&&c.match(i)&&Date.parse(c)||null,p,x,$;if(g){if(g>b)return-1;if(b>g)return 1}for($=0;f>$;$++){if(p=!(h[$]||"").match(r)&&parseFloat(h[$])||h[$]||0,x=!(u[$]||"").match(r)&&parseFloat(u[$])||u[$]||0,isNaN(p)!==isNaN(x))return isNaN(p)?1:-1;if(typeof p!=typeof x&&(p+="",x+=""),x>p)return-1;if(p>x)return 1}return 0};0!==r.length&&(i.$table.find("thead th").removeClass(i.settings.asc+" "+i.settings.desc),this.$th=e,this.direction[o]=this.index!=o?"desc":"asc"!==s&&"desc"!==s?"desc"===this.direction[o]?"asc":"desc":s,this.index=o,s="asc"==this.direction[o]?1:-1,i.$table.trigger("tablesort:start",[i]),i.log("Sorting by "+this.index+" "+this.direction[o]),r.sort(function(a,n){var r=t(a),o=t(n),d=r.index(),u=o.index();return l[d]?a=l[d]:(a=c(e,i.cellToSort(a),i),l[d]=a),l[u]?n=l[u]:(n=c(e,i.cellToSort(n),i),l[u]=n),h(a,n)*s}),r.each(function(t,e){d.append(e)}),n.append(d.html()),e.addClass(i.settings[i.direction[o]]),i.log("Sort finished in "+((new Date).getTime()-a.getTime())+"ms"),i.$table.trigger("tablesort:complete",[i]))},cellToSort:function(e){return t(t(e).find("td").get(this.index))},log:function(e){(t.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+e)},destroy:function(){return this.$table.find("thead th").unbind("click.tablesort"),this.$table.data("tablesort",null),null}},t.tablesort.DEBUG=!1,t.tablesort.defaults={debug:t.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending"},t.fn.tablesort=function(e){var s,a,i;return this.each(function(){s=t(this),i=s.data("tablesort"),i&&i.destroy(),s.data("tablesort",new t.tablesort(s,e))})}}(jQuery);